<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatiio.org//DTD Mapper 3.0//EN"
        "http://mybatiio.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="inv_store">

    <select id="getStoreListByPageCount" resultType="int" parameterType="Map">
        SELECT count(1) FROM inv_item_transaction_header
        where 1=1
        <if test="transaction_type != null and transaction_type!=''">  and transaction_type=#{transaction_type} </if>
    </select>

    <select id="getStoreListByPage" resultType="Map" parameterType="Map">
        SELECT * FROM inv_item_transaction_header
        where 1=1
        <if test="transaction_type != null and transaction_type!=''">  and transaction_type=#{transaction_type} </if>
        ORDER BY create_date desc
        limit #{startIndex},#{perPage}
    </select>

    <select id="getStoreListByType" resultType="Map" parameterType="Map">
        SELECT * FROM inv_item_transaction_header where transaction_type =#{transaction_type}
    </select>

    <insert id="createStore"  parameterType="Map" keyColumn="transaction_id" keyProperty="transaction_id" useGeneratedKeys="true">
        INSERT INTO `erp`.`inv_item_transaction_header`(`transaction_id`, `transaction_type`, `create_by`, `create_date`, `source_system`, `source_voucher`, `source_id`, `out_subInvCode`, `in_subInvCode`) VALUES (#{transaction_id}, #{transaction_type}, #{create_by}, #{create_date}, #{source_system}, #{source_voucher}, #{source_id}, #{out_subInvCode}, #{in_subInvCode});
    </insert>

</mapper>
